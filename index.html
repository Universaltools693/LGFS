<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Eicher Lead Generation for Madhya Pradesh Trucking Businesses">
  <title>Eicher Lead Generation</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { margin: 0; background: #1e3a8a; font-family: 'Montserrat', sans-serif; color: #fff; overflow-x: hidden; }
    .container { max-width: 100%; padding: 10px; box-sizing: border-box; }
    h1 { font-size: 1.5rem; font-weight: 700; text-align: center; margin: 10px 0; }
    h2 { font-size: 1.2rem; font-weight: 700; text-align: center; margin: 10px 0; }
    .input-group { margin: 10px 0; }
    .input-group label { display: block; font-size: 0.9rem; font-weight: 600; margin-bottom: 5px; }
    .input-group input, .input-group select { width: 100%; padding: 8px; font-size: 0.9rem; border: none; border-radius: 4px; background: #2b6cb0; color: #fff; }
    .input-group input:focus, .input-group select:focus { outline: none; background: #3b82f6; }
    button { background: #2b6cb0; color: #fff; font-size: 0.9rem; font-weight: 700; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #3b82f6; }
    .error { color: #ff4d4d; font-size: 0.8rem; margin-top: 5px; text-align: center; }
    .download-container { position: absolute; top: 10px; right: 10px; }
    .download-button { background: #2b6cb0; padding: 8px 15px; }
    .download-dropdown { display: none; position: absolute; top: 100%; right: 0; background: #2b6cb0; border-radius: 4px; }
    .download-container:hover .download-dropdown { display: block; }
    .download-dropdown button { width: 100%; text-align: left; padding: 8px; }
    table { width: 100%; border-collapse: collapse; margin: 10px 0; background: #2b6cb0; }
    th, td { border: 1px solid #fff; padding: 8px; text-align: left; }
    th { background: #1e3a8a; }
    @media (min-width: 768px) { h1 { font-size: 2rem; } h2 { font-size: 1.5rem; } .input-group input, .input-group select { font-size: 1rem; } button { font-size: 1rem; padding: 10px 20px; } }
  </style>
</head>
<body>
  <div id="app" class="container"></div>
  <script>
    // Login State
    let isAuthenticated = false;
    let userName = '';

    // Greeting Function
    function getGreeting() {
      const hour = new Date().getHours();
      if (hour < 12) return "Good Morning";
      if (hour < 17) return "Good Afternoon";
      if (hour < 20) return "Good Evening";
      return "Good Night";
    }

    // Sample Leads Data
    const leads = [
      { businessName: "Tashi Transporter", contactNumber: "+91-8043835060", address: "Aaga Chowk, Jabalpur - 482002", area: "Ranjhi", areaType: "Urban", businessType: "Medium Logistics", application: "Marble transport, FMCG", model: "Pro 3019", source: "Justdial" },
      { businessName: "Unity Logistic Park", contactNumber: "+91-8044460148", address: "Katangi Bypass Chowk, Jabalpur - 482001", area: "Barela", areaType: "Urban", businessType: "Large Logistics", application: "FMCG, e-commerce", model: "Pro 3019", source: "IndiaMART" },
      { businessName: "Sai Marble & Granite", contactNumber: "+91-761-4040404", address: "Marble Market, Gorakhpur, Jabalpur - 482001", area: "Gorakhpur", areaType: "Urban", businessType: "Small Business", application: "Marble/granite transport", model: "Pro 3019", source: "Sulekha" },
      { businessName: "Sagar Transport Solutions", contactNumber: "+91-7582-223344", address: "Tili Road, Sagar - 470002", area: "Tili Road", areaType: "Urban", businessType: "Medium Logistics", application: "FMCG, industrial goods", model: "Pro 3019", source: "Justdial" },
      { businessName: "Singrauli Mining Transport", contactNumber: "+91-7866-445566", address: "Waidhan, Singrauli - 486886", area: "Waidhan", areaType: "Urban", businessType: "Medium Logistics", application: "Mining, construction materials", model: "Pro 8035XM", source: "IndiaMART" }
    ];

    const geoData = {
      country: "India",
      state: "Madhya Pradesh",
      cities: [
        { name: "Jabalpur", areas: [{ name: "Ranjhi", type: "Urban" }, { name: "Barela", type: "Urban" }, { name: "Bargi", type: "Rural" }, { name: "Sihora", type: "Rural" }, { name: "Kundam", type: "Rural" }, { name: "Gorakhpur", type: "Urban" }, { name: "Adhartal", type: "Urban" }, { name: "Rampur", type: "Urban" }, { name: "Vijay Nagar", type: "Urban" }] },
        { name: "Sagar", areas: [{ name: "Tili Road", type: "Urban" }, { name: "Makronia", type: "Urban" }, { name: "Banda", type: "Rural" }, { name: "Khurai", type: "Rural" }] },
        { name: "Rewa", areas: [{ name: "Sirmour", type: "Urban" }, { name: "Mauganj", type: "Rural" }, { name: "Govindgarh", type: "Rural" }] },
        { name: "Satna", areas: [{ name: "Civil Lines", type: "Urban" }, { name: "Maihar", type: "Rural" }, { name: "Nagod", type: "Rural" }] },
        { name: "Katni", areas: [{ name: "Madanpur", type: "Urban" }, { name: "Barhi", type: "Rural" }, { name: "Vijayraghavgarh", type: "Rural" }] },
        { name: "Chhindwara", areas: [{ name: "Parasia", type: "Urban" }, { name: "Amarwara", type: "Rural" }, { name: "Chaurai", type: "Rural" }] },
        { name: "Damoh", areas: [{ name: "Civil Ward", type: "Urban" }, { name: "Hatta", type: "Rural" }, { name: "Patera", type: "Rural" }] },
        { name: "Singrauli", areas: [{ name: "Waidhan", type: "Urban" }, { name: "Jayant", type: "Urban" }, { name: "Chitrangi", type: "Rural" }] },
        { name: "Balaghat", areas: [{ name: "Waraseoni", type: "Urban" }, { name: "Baihar", type: "Rural" }, { name: "Lanji", type: "Rural" }] },
        { name: "Seoni", areas: [{ name: "Barghat", type: "Rural" }, { name: "Keolari", type: "Rural" }, { name: "Chhapara", type: "Urban" }] },
        { name: "Narsinghpur", areas: [{ name: "Gadarwara", type: "Urban" }, { name: "Kareli", type: "Rural" }, { name: "Gotegaon", type: "Urban" }] },
        { name: "Hoshangabad", areas: [{ name: "Itarsi", type: "Urban" }, { name: "Pipariya", type: "Urban" }, { name: "Sohagpur", type: "Rural" }] },
        { name: "Betul", areas: [{ name: "Sarni", type: "Urban" }, { name: "Multai", type: "Rural" }, { name: "Amla", type: "Rural" }] },
        { name: "Sidhi", areas: [{ name: "Churhat", type: "Rural" }, { name: "Sihawal", type: "Rural" }, { name: "Majhauli", type: "Rural" }] }
      ]
    };

    const eicherModels = {
      haulage: [{ name: "Pro 2119", application: "Marble transport, FMCG" }, { name: "Pro 3019", application: "Marble transport, FMCG" }, { name: "Pro 6028", application: "Industrial goods, cement" }, { name: "Pro 3019 CNG", application: "Eco-friendly FMCG" }, { name: "Pro 6048", application: "Tanker, bulkers" }],
      tippers: [{ name: "Pro 6019 XPT", application: "Construction, small mining" }, { name: "Pro 8035XM", application: "Heavy mining" }, { name: "Pro 6028T", application: "Medium mining" }],
      transitMixers: [{ name: "Pro 6028TM", application: "RMC delivery" }, { name: "Pro 6035TM", application: "Large RMC projects" }]
    };

    // Login Logic
    function renderLogin() {
      let authName = '', authNumber = '', userName = '', otp = '', showOtp = false, error = '';
      const app = document.getElementById('app');

      function updateUI() {
        app.innerHTML = `
          <h1>${getGreeting()}</h1>
          <h2>Need Authentication</h2>
          <div class="input-group"><label>Authorize Person Name</label><input type="text" value="${authName}" placeholder="Enter Vikas Tiwari"></div>
          <div class="input-group"><label>Authorize Person Mobile Number</label><input type="text" value="${authNumber}" placeholder="Enter 7974123411"></div>
          <div class="input-group"><label>Your Name</label><input type="text" value="${userName}" placeholder="Enter Your Name"></div>
          ${showOtp ? '<div class="input-group"><label>Please Input Authorization Code</label><input type="text" value="' + otp + '" placeholder="Enter OTP"></div>' : ''}
          <button onclick="handleGo()">Go</button>
          ${error ? `<p class="error">${error}</p>` : ''}
        `;
        if (!showOtp) {
          app.querySelectorAll('input')[0].addEventListener('input', e => authName = e.target.value);
          app.querySelectorAll('input')[1].addEventListener('input', e => authNumber = e.target.value);
          app.querySelectorAll('input')[2].addEventListener('input', e => userName = e.target.value);
        } else {
          app.querySelector('input').addEventListener('input', e => otp = e.target.value);
        }
      }

      function handleGo() {
        if (!showOtp) {
          if (authName !== 'Vikas Tiwari' || authNumber !== '7974123411') {
            error = 'Invalid Authorized Name or Number';
          } else {
            showOtp = true;
            error = '';
          }
        } else {
          if (otp === '654321') {
            isAuthenticated = true;
            userName = userName || 'User';
            renderApp();
          } else {
            error = 'Invalid OTP';
          }
        }
        updateUI();
      }

      updateUI();
    }

    // App Logic
    function renderApp() {
      let selectedCity = '', selectedArea = '', selectedType = '', selectedCategory = '', selectedModel = '', filteredLeads = [], showDownload = false;
      const app = document.getElementById('app');

      function updateUI() {
        app.innerHTML = `
          <h1>${getGreeting()}, ${userName}</h1>
          <h2>Eicher Lead Generation</h2>
          ${showDownload ? '<div class="download-container"><button class="download-button">Download</button><div class="download-dropdown"><button onclick="downloadExcel()">Download in Excel File</button><button onclick="downloadPDF()">Download in PDF File</button></div></div>' : ''}
          <div class="input-group"><label>Country: </label><input type="text" value="India" disabled></div>
          <div class="input-group"><label>State: </label><input type="text" value="Madhya Pradesh" disabled></div>
          <div class="input-group"><label>City: </label><select onchange="selectedCity=this.value; selectedArea=''; updateUI()"><option value="">Select City</option>${geoData.cities.map(c => `<option value="${c.name}">${c.name}</option>`).join('')}</select></div>
          <div class="input-group"><label>Area: </label><select onchange="selectedArea=this.value" disabled=${!selectedCity}><option value="">Select Area</option>${selectedCity ? geoData.cities.find(c => c.name === selectedCity).areas.map(a => `<option value="${a.name}">${a.name}</option>`).join('') : ''}</select></div>
          <div class="input-group"><label>Type: </label><select onchange="selectedType=this.value"><option value="">Select Type</option><option value="Urban">Urban</option><option value="Rural">Rural</option></select></div>
          <div class="input-group"><label>Category: </label><select onchange="selectedCategory=this.value; selectedModel=''; updateUI()"><option value="">Select Category</option><option value="haulage">Haulage Trucks</option><option value="tippers">Tippers</option><option value="transitMixers">Transit Mixers</option></select></div>
          <div class="input-group"><label>Model: </label><select onchange="selectedModel=this.value" disabled=${!selectedCategory}><option value="">Select Model</option>${selectedCategory ? eicherModels[selectedCategory].map(m => `<option value="${m.name}">${m.name}</option>`).join('') : ''}</select></div>
          <button onclick="handleGenerateLeads()">Generate Leads</button>
          <div><h3>Leads</h3>${filteredLeads.length === 0 ? '<p>No leads found. Please select valid options.</p>' : `<table><thead><tr><th>Business Name</th><th>Contact Number</th><th>Address</th><th>Area</th><th>Business Type</th><th>Application</th><th>Source</th></tr></thead><tbody>${filteredLeads.map(l => `<tr><td>${l.businessName}</td><td>${l.contactNumber}</td><td>${l.address}</td><td>${l.area}</td><td>${l.businessType}</td><td>${l.application}</td><td>${l.source}</td></tr>`).join('')}</tbody></table>`}</div>
        `;
      }

      function handleGenerateLeads() {
        filteredLeads = leads.filter(l => l.area === selectedArea && l.model === selectedModel && (selectedType === '' || l.areaType === selectedType));
        showDownload = filteredLeads.length > 0;
        updateUI();
      }

      function downloadExcel() {
        const worksheet = XLSX.utils.json_to_sheet(filteredLeads);
        const workbook = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(workbook, worksheet, "Leads");
        worksheet['!cols'] = [{ wch: 20 }, { wch: 20 }, { wch: 30 }, { wch: 15 }, { wch: 20 }, { wch: 25 }, { wch: 15 }];
        XLSX.utils.sheet_add_aoa(worksheet, [["Eicher Lead Generation", "", "", "", "", "", `Generated on: ${new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' })}`]], { origin: "A1" });
        XLSX.writeFile(workbook, "Eicher_Leads.xlsx");
      }

      function downloadPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFont("Helvetica", "bold");
        doc.setFontSize(20);
        doc.text("Eicher Lead Generation", 10, 10);
        doc.setFontSize(12);
        doc.text(`Generated on: ${new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' })}`, 10, 20);
        doc.setFontSize(10);
        doc.setFont("Helvetica", "normal");
        const tableData = filteredLeads.map(l => [l.businessName, l.contactNumber, l.address, l.area, l.businessType, l.application, l.source]);
        doc.autoTable({ head: [['Business Name', 'Contact Number', 'Address', 'Area', 'Business Type', 'Application', 'Source']], body: tableData, startY: 30, styles: { fontSize: 8 }, headStyles: { fillColor: [30, 64, 175] } });
        doc.text("Generated by Eicher Lead Generation System", 10, doc.lastAutoTable.finalY + 10);
        doc.save("Eicher_Leads.pdf");
      }

      updateUI();
    }

    // Initial Render
    if (!isAuthenticated) renderLogin();
    else renderApp();

    // Load XLSX and jsPDF
    const scriptXLSX = document.createElement('script');
    scriptXLSX.src = 'https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js';
    scriptXLSX.onload = () => {
      const scriptJSPDF = document.createElement('script');
      scriptJSPDF.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
      scriptJSPDF.onload = () => console.log('Libraries loaded');
      document.body.appendChild(scriptJSPDF);
    };
    document.body.appendChild(scriptXLSX);
  </script>
</body>
</html>
